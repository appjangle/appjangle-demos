<!-- one.upload https://u1.linnk.it/qc8sbw/usr/apps/textsync/files/demo_instant_data_page -->
<div class="row-fluid">
	<div class="span12">
		<h4>Summary</h4>
		<p>This demo allows to make posts to a status or message board. A
			text typed in the input box above will appear as item in a list below
			the input box upon clicking the [Post] button.</p>
		<p>
	</div>
</div>
<div class="row-fluid">
	<div class="span12">
		<h4 style="margin-top: 30px;">Demo</h4>
	</div>
</div>
<div class="ajdemo" style="padding: 5px;">
	<div class="row-fluid">
		<div class="span12">
			<div class="instantDataExample hide"
				style="border: 1px solid #4C3C1B; padding: 15px;">
				<!-- one.download https://u1.linnk.it/qc8sbw/usr/apps/textsync/files/demo_instant_data_html -->


		<div class="row-fluid">
			<div class="input-append" style="border-radius: 3px;">

				<input class="postInput input-block-level" placeholder="What's up?"
					type="text"
					style="width: 80%; float: left;"></input>
				<button class="postButton btn btn-inverse input-small "
					type="button" style="width: 20%; max-width: 90px; float: left;">Post</button>
			</div>

		</div>


		<div class="row-fluid">
			<div class="span12">
				<p style="color: gray;" class="noPostsYet">No posts yet.</p>
				<ul class="media-list postList">

				</ul>
				<p>
					Total Posts: <span class="totalPosts">0</span>
				</p>
			</div>
		</div>


		<div class="postTemplate hide post"
			onMouseOver="this.style.backgroundColor='#F8F8F8'"
			onMouseOut="this.style.backgroundColor='#FFFFFF'">
			<a class="pull-left" href="#"> <img class="media-object"
				src="http://docs.google.com/drawings/d/1nL9LVuDNjakiFW9YL5t1QOMtUgn2bVIl4OAXpPS6pMw/pub?w=50&h=50">
				<!-- caesar small: src="http://docs.google.com/drawings/d/1p5QOqa_z14b5wy7dKYDXfsq8t9jFt3ZFqZxjwt8wpmk/pub?w=30&h=30" -->
				<!-- seal: src="http://docs.google.com/drawings/pub?id=13FdmIQDoL33MCPnMNyn7kxabBTGPCqhvxJYiRB2Cns0&w=30&h=30" -->
			</a>
			<div class="media-body">
				<h4 class="media-heading" style="font-size: 80%;">
					<span class="postTime hide">2:29</span> <span class="postAuthor">Caesar</span>
				</h4>
				<p>
					<span class="postText"></span>
				</p>
			</div>
		</div>

		<!-- one.end -->
			</div>
		</div>
	</div>
</div>

<div class="row-fluid">
	<div class="span12">
		<h4 style="margin-top: 30px;">Usage of Appjangle</h4>
		<p>
			Appjangle provides the local database containing the posted messages.
			The <a href="http://nextweb.io">Nextweb open source API</a> is used
			to interact with the Appjangle platform in this example. Operations
			in the example are performed in roughly the following order (see full
			source code below):
		</p>
		<p class="text-success" style="margin-top: 35px;">
			<b>1. Defining data container for app data</b>
		</p>

		<p>
			The <a href="http://nextweb.io/docs/nextweb-seed.value.html">seed
				operation</a> is used to seed a new root node in the Appjangle database.
			This root node works as the 'container' for all application data. All
			other data is appended as direct and indirect child nodes to this
			root node.
		</p>
		<pre class="prettyprint">
posts = session.seed("local");
</pre>
		<p class="text-success" style="margin-top: 35px;">
			<b>2. Loading global data type for posts </b>
		</p>

		<p>
			The <a
				href="http://nextweb.io/docs/nextweb-node-operation.value.html">node
				operation</a> is used to create a reference to a data type node. This
			data type node has been defined before with another Appjangle app.
			The data type can be shared between unlimited apps and allows to
			distinguish posted messages from other data stored in the database
			(see <a href="http://nextweb.io/docs/nextweb-data-pattern.value.html">property
				pattern</a>).
		<pre class="prettyprint">
var postType = "http://slicnet.com/seed1/seed1/3/6/5/2/h/sd/aPost1";
var aPost = session.node(postType);</pre>
		<p class="text-success" style="margin-top: 35px;">
			<b>3. Store new posts</b>
		</p>

		<p>
			The <a href="http://nextweb.io/docs/nextweb-append-value.value.html">append
				operation</a> is used to append the text in the input to the
			<code>posts</code>
			seed node created above. The second append is used to assign the data
			type loaded above.
		</p>
		<pre class="prettyprint">
posts.append($(".postInput").val()).append(aPost);
</pre>
		<p class="text-success" style="margin-top: 35px;">
			<b>4. Calculating total posts</b>
		</p>

		<p>
			The <a
				href="http://nextweb.io/docs/nextweb-selectAll-property.value.html">selectAll(property)</a>
			operation is used to retrieve a list of all append children of the
			root node
			<code>posts</code>
			which have been marked with the post data type mentioned above. The
			length of this list is used to display the total number of posts.
		</p>
		<pre class="prettyprint">
posts.selectAll(aPost).get(function(postsList) {
    $(".totalPosts").text(postsList.size());
});</pre>
		<p class="text-success" style="margin-top: 35px;">
			<b>5. Displaying posts</b>
		</p>

		<p>
			The <a
				href="http://nextweb.io/docs/nextweb-selectAll-property.value.html">selectAll(property)</a>
			is again used to retrieve a <a
				href="http://nextweb.io/docs/nextweb-entity-list.value.html">NodeList</a>
			with posts. The values of these nodes are then iterated through and
			their text is assigned to elements in a post list.
		</p>
		<pre class="prettyprint">
var i, item;
                    
posts.selectAll(aPost).get(function(postsList) {
     [..]
     for (i=postsList.values().length-1; i&gt;=0; i--) {
         [..]
         $(".postText", item).text(postsList.values()[i]);
     }
};</pre>
	</div>
</div>
<div class="row-fluid">
	<div class="span12">
		<h4 style="margin-top: 30px;">Source Code</h4>
		<p>
			<a
				href="https://github.com/appjangle/appjangle-demos/blob/master/src/main/js/demo_instant_data.js">demo_instant_data.js</a>
		</p>
		<p>
			<a
				href="https://github.com/appjangle/appjangle-demos/blob/master/src/main/js/demo_instant_data.html">demo_instant_data.html</a>
		</p>
	</div>
</div>
<!-- one.end -->
