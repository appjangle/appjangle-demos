<!DOCTYPE html>
<!-- one.upload https://u1.linnk.it/qc8sbw/usr/apps/textsync/files/demo_transparent_cloud_persistence_page1 -->
<html>

<head>
<link
	href="http://appjangle.com/assets/v02/bootstrap-2.2.2/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="http://appjangle.com/assets/v02/bootstrap-2.2.2/css/bootstrap-responsive.min.css"
	rel="stylesheet">
<link
	href="http://u1.linnk.it/qc8sbw/usr/apps/textsync/files/tomorrow.value.css"
	rel="stylesheet">

<script src="http://appjangle.com/js/v01/appjangle/appjangle.nocache.js"></script>
<script
	src="http://appjangle.com/assets/v02/prettify-small-1-Jun-2011/prettify.js"></script>
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script
	src="http://u1.linnk.it/qc8sbw/usr/apps/textsync/files/demo_transparent_cloud_persistence_js.value.js"></script>

<script>
	window.onNextwebOnedb = function(engine) {

		Appjangle.demos
				.initTransparentCloudPersistenceDemo({
					wrapper : $(".transparentCloudPersistenceExample"),
					engine : engine,
					onload : function(node) {
						$(".openInNewWindow")
								.attr(
										"href",
										"http://u1.linnk.it/qc8sbw/usr/apps/textsync/files/demo_transparent_cloud_persistence_app.value.html#"
												+ node);
					}
				});
	};
	window.onload = function() {
		prettyPrint();
	}
</script>

<style>
</style>

</head>

<body>
	<div class="container-fluid">


		<!-- one.upload https://u1.linnk.it/qc8sbw/usr/apps/textsync/files/demo_transparent_cloud_persistence_page -->


		<div class="row-fluid">
			<div class="span12">
				<h4>Demo 03: Add Persistence</h4>
				<hr>
				<p>After building a first UI prototype using the Appjangle
					Embedded cloud, we now enhance the app to store all post in the
					Appjangle cloud storage.</p>
				<p>
					You can write posts in the same way as in <a href="#instantData">demo
						02</a>. However, this time all posts are persisted. You can click on
					the button [Open in New Window] to load the posts in a new browser
					window.
			</div>
		</div>
		<div class="row-fluid">
			<div class="span12">
				<h4 style="margin-top: 30px;">Live Demo</h4>
			</div>
		</div>
		<div class="ajdemo" style="padding: 5px;">
			<div class="row-fluid">
				<div class="span12">
					<div class="transparentCloudPersistenceExample hide"
						style="border: 1px solid #4C3C1B; padding: 15px;">
						<!-- one.download https://u1.linnk.it/qc8sbw/usr/apps/textsync/files/demo_instant_data_html -->


						<div class="row-fluid">
							<div class="input-append" style="border-radius: 3px;">

								<input class="postInput input-block-level"
									placeholder="What's up?" type="text"
									style="width: 80%; float: left;"></input>
								<button class="postButton btn btn-inverse input-small "
									type="button" style="width: 20%; max-width: 90px; float: left;">Post</button>
							</div>

						</div>


						<div class="row-fluid">
							<div class="span12">
								<p style="color: gray;" class="noPostsYet">No posts yet.</p>
								<ul class="media-list postList">

								</ul>
								<p>
									Total Posts: <span class="totalPosts">0</span>
								</p>

							</div>
						</div>


						<div class="postTemplate hide post"
							onMouseOver="this.style.backgroundColor='#F8F8F8'"
							onMouseOut="this.style.backgroundColor='#FFFFFF'">
							<a class="pull-left" href="#"> <img class="media-object"
								src="http://docs.google.com/drawings/d/1nL9LVuDNjakiFW9YL5t1QOMtUgn2bVIl4OAXpPS6pMw/pub?w=50&h=50">
								<!-- caesar small: src="http://docs.google.com/drawings/d/1p5QOqa_z14b5wy7dKYDXfsq8t9jFt3ZFqZxjwt8wpmk/pub?w=30&h=30" -->
								<!-- seal: src="http://docs.google.com/drawings/pub?id=13FdmIQDoL33MCPnMNyn7kxabBTGPCqhvxJYiRB2Cns0&w=30&h=30" -->
							</a>
							<div class="media-body">
								<h4 class="media-heading" style="font-size: 80%;">
									<span class="postTime hide">2:29</span> <span
										class="postAuthor">Caesar</span>
								</h4>
								<p>
									<span class="postText"></span>
								</p>
							</div>

						</div>

						<!-- one.end -->


					</div>
				</div>
			</div>
			<div class="row-fluid">
				<div class="span12">
					<a href="#" class="openInNewWindow btn btn-primary btn-mini"
						target="_blank">Open in New Window</a>
				</div>
			</div>
		</div>




		<!-- <div class="row-fluid">
			<div class="span12">
				<h4 style="margin-top: 30px;">Note</h4>
				<dl class="dl-horizontal">
					<dt style="font-size: 90%;">Cloud Persistence</dt>
					<dd>
						In this demo, all posts are persisted in the Appjangle cloud. The
						source code, however, is almost identical to the <a
							href="#instantData">instant data demo</a>, which worked with a
						local database. The high responsiveness of the application is
						maintained without any need for additional caching code, since
						data is kept in a local embedded database, which is transparently
						synchronized with the Appjangle cloud.
					</dd>

				</dl>
				<dl class="dl-horizontal" style="margin-top: 10px;">
					<dt style="font-size: 90%;">No Collaboration</dt>
					<dd>
						Opening the posts in a new window allows to view them but not make
						new posts. Check the <a href="#stateSynchronization">state
							synchronization</a> and <a href="#fineGrainedSharing">fine-grained
							sharing</a> demos to see how the post can easily be shared and edited
						in multiple locations.
					</dd>
				</dl>

			</div>
		</div> -->



		<div class="row-fluid">
			<div class="span12">
				<h4 style="margin-top: 30px;">Key Changes</h4>

				<h5>Main Application</h5>
				<p>
					The JavaScript code of this demo is almost identical to the
					JavaScript code used for <a href="#instantData">demo 03</a>, which
					used a local embedded database. The following source code extracts
					from <a
						href="https://github.com/appjangle/appjangle-demos/blob/master/src/main/js/demo04_add_persistence.js">demo04_add_persistence.js</a>
					illustrate the key differences to the first demo (<a
						href="https://github.com/appjangle/appjangle-demos/blob/master/src/main/js/demo03_web_ui.js">demo03_web_ui.js</a>):
				</p>

				<div style="padding: 15px;">
					<!-- <p style="border-bottom: solid; padding-bottom: 5px;">
						<a
							href="https://github.com/appjangle/appjangle-demos/blob/master/src/main/js/demo_transparent_cloud_persistence.js">demo_transparent_cloud_persistence.js</a>
					</p> -->


					<p style="margin-left: 40px; font-size: 90%;">
						An embedded db server as in the <a href="#instantData">demo 03</a>
						is not required. In any case the session created with
						<code>Nextweb.createSession()</code>
						continues to maintain a local copy of all accessed nodes.
					</p>
					<pre class="prettyprint linenums:22">
// BEFORE: server = Nextweb.startServer(12322);
session = Nextweb.createSession();</pre>

					<p style="margin-left: 40px; margin-top: -13px; font-size: 90%;">
						We call the <a
							href="http://nextweb.io/docs/nextweb-seed.value.html">seed()</a>
						operation and not the operation <a
							href="http://nextweb.io/docs/nextweb-seed-local.value.html">seed('local')</a>.
						This will lead to a call being sent to the Appjangle cloud, when
						the seed node is requested. The returned seed node will then have
						a <em>globally unique URI</em>, which we can use to share the
						appended posts with any REST capable application.
					</p>
					<pre class="prettyprint linenums:31">
// BEFORE: posts = session.seed("local");
posts = session.seed();
</pre>
					<h5>Uploading Data Type To Appjangle Cloud</h5>
					<p>Since in this example we connect our application with the
						Appjangle cloud, it makes sense to define the data type for posts
						to this cloud to enable easy reuse of the data type in this and
						other applications.</p>
					<p>
						The following script creates a new data type node <em>aPost</em>
						and prints out the address for this node. This address is all we
						need to use the newly created node as globally available, reusable
						and documented data type (the nodes you have created will be
						persisted indefinitely)! We can also save the 'secret' for the
						node in order to be able to edit and modify our data type later
						on.
					</p>

					<div class="jsexample" id="dataTypesExample">
						<pre class="jscode">var session = Nextweb.createSession();

var typesRoot = session.seed();

var aPost = typesRoot.append("A post on a message board, wall or chat room.", "./aPost");

session.commit().get(function(success) {
    console.log("URI: "+aPost.get().uri());
    console.log("Secret: "+aPost.get().secret());
    session.close().get(function() { });
});
</pre>

					</div>
				</div>
			</div>


			<div class="row-fluid">
				<div class="span12">
					<h4 style="margin-top: 30px;">Files</h4>

					<table class="table table-hover table-condensed"
						style="font-size: 90%;">
						<tr>
							<td><a
								href="https://github.com/appjangle/appjangle-demos/blob/master/src/main/js/demo04_add_persistence.js">demo04_add_persistence.js</a></td>
							<td>The application logic for the demo. See annotations
								above.</td>
						</tr>
						<tr>
							<td><a
								href="https://github.com/appjangle/appjangle-demos/blob/master/src/main/resources/demo03_app.html">demo03_app.html</a></td>
							<td>The HTML for the application is the same as in the <a
								href="#instantData">demo 03</a>.
							</td>
						</tr>
						<tr>
							<td><a
								href="https://github.com/appjangle/appjangle-demos/blob/master/src/main/resources/demo04_app.html">demo04_app.html</a></td>
							<td>This HTML page is a simple wrapper around the two files
								above. It is used to display the posts in a new window.</td>
						</tr>
					</table>

				</div>
			</div>
			<!-- one.end -->

		</div>
</body>
</html>
<!-- one.end -->
